<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <title>KEX Mobile POS æ½æ”¶</title>
  <style>
    /* å…¨å±€æ ·å¼é‡ç½®ä¸åŸºç¡€é…ç½® */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
      background: #f5f6f8;
      font-size: 16px;
      color: #333;
    }
    
    /* åº”ç”¨å®¹å™¨ - å®Œå…¨é€‚é…ç§»åŠ¨ç«¯ */
    .app {
      width: 100vw;
      min-height: 100vh;
      background: #fff;
      overflow-x: hidden;
    }
    
    /* å¤´éƒ¨æ ·å¼ä¼˜åŒ– */
    .header {
      padding: 16px 20px;
      font-size: 18px;
      font-weight: 600;
      border-bottom: 1px solid #eee;
      display: flex;
      align-items: center;
      gap: 12px;
      color: #fa8c16;
      background: #fff;
      position: sticky;
      top: 0;
      z-index: 10;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }
    
    .logo {
      width: 36px;
      height: 36px;
      border-radius: 8px;
      background: #fa8c16;
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 14px;
    }
    
    /* é¡µé¢å®¹å™¨ä¼˜åŒ– - ä¿®å¤æ ¸å¿ƒé—®é¢˜ */
    .page {
      display: none; /* ä»…ä¿ç•™åˆå§‹éšè— */
      padding: 24px 20px;
      min-height: calc(100vh - 74px);
      flex-direction: column;
    }
    
    .page.active {
      display: flex; /* åªæœ‰activeæ—¶æ‰æ˜¾ç¤ºä¸ºflex */
    }
    
    /* æŒ‰é’®æ ·å¼å¢å¼º */
    .btn {
      width: 100%;
      padding: 16px;
      margin-top: 16px;
      font-size: 17px;
      border-radius: 12px;
      border: none;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.2s ease;
    }
    
    .btn:active {
      opacity: 0.85;
      transform: scale(0.98);
    }
    
    .primary {
      background: #fa8c16;
      color: #fff;
    }
    
    .secondary {
      background: #fff7e6;
      color: #fa8c16;
      border: 1px solid #ffd591;
    }
    
    .danger {
      background: #ff4d4f;
      color: #fff;
    }

    /* ç®¡ç†å‘˜åŠŸèƒ½æŒ‰é’®æ ·å¼ */
    .admin-btn {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #f8f9fa;
      border: 1px solid #e9ecef;
    }
    
    /* å¡ç‰‡æ ·å¼ä¼˜åŒ– */
    .card {
      border: 1px solid #eee;
      border-radius: 12px;
      padding: 16px;
      margin-top: 16px;
      background: #fafafa;
      box-shadow: 0 2px 4px rgba(0,0,0,0.03);
    }

    /* æƒé™å¡ç‰‡æ ·å¼ */
    .permission-card {
      margin-top: 12px;
      border-color: #fa8c16;
      background: #fff8ed;
    }
    
    /* åˆ—è¡¨æ ·å¼ä¼˜åŒ– */
    .list {
      margin-top: 16px;
      flex: 1;
      overflow-y: auto;
      max-height: 300px;
    }
    
    .item {
      padding: 12px 16px;
      border-bottom: 1px dashed #ddd;
      font-size: 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .item:last-child {
      border-bottom: none;
    }
    
    /* æ–‡æœ¬æ ·å¼ä¼˜åŒ– */
    p {
      margin-bottom: 8px;
      line-height: 1.5;
    }

    .user-info {
      margin-bottom: 16px;
      line-height: 1.8;
    }
    
    /* æç¤ºæ¡†ä¼˜åŒ– */
    .toast {
      position: fixed;
      bottom: 40px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0,0,0,0.8);
      color: #fff;
      padding: 12px 20px;
      border-radius: 24px;
      display: none;
      z-index: 999;
      font-size: 15px;
      min-width: 120px;
      text-align: center;
    }
    
    /* æ‰«ç åŒºåŸŸæ ·å¼å¢å¼º */
    .scan-area {
      border: 2px dashed #fa8c16;
      border-radius: 12px;
      padding: 40px 20px;
      text-align: center;
      color: #fa8c16;
      margin-top: 16px;
    }
    
    /* åŠ è½½åŠ¨ç”»æ ·å¼ */
    .loading {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(250,140,22,0.3);
      border-radius: 50%;
      border-top-color: #fa8c16;
      animation: spin 1s ease-in-out infinite;
      margin-right: 8px;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="header">
      <div class="logo">KEX</div>
      <span>Mobile POS æ½æ”¶ç³»ç»Ÿ</span>
    </div>

    <!-- é¦–é¡µ -->
    <div class="page active" id="home">
      <div class="user-info">
        ä½ å¥½ï¼Œæ¬¢è¿è¿›å…¥Mobile POSæ½æ”¶ç³»ç»Ÿï¼Œæ‚¨çš„å·¥å·æ˜¯<b>KEX10086</b>ï¼Œç»‘å®šé—¨åº—ä»£ç ä¸º<b>SH001</b>ã€‚
      </div>
      <div id="role-permission" class="card permission-card">
        <p><b>å½“å‰è§’è‰²ï¼šæ½æ”¶å‘˜</b></p>
        <p>æƒé™ï¼š</p>
        <ul style="margin-left: 20px; margin-top: 8px;">
          <li>æ‰«ç ã€æ ¡éªŒã€ç¡®è®¤æ½æ”¶</li>
          <li>æŸ¥çœ‹æ½æ”¶è®°å½•</li>
        </ul>
      </div>
      <button class="btn primary" id="collect-btn" onclick="go('scan')">ğŸ“¦ æ‰¹é‡æ‰«ç æ½æ”¶</button>
      <button class="btn secondary" onclick="switchRole()">åˆ‡æ¢è§’è‰²</button>
      
      <!-- ç®¡ç†å‘˜åŠŸèƒ½å…¥å£ï¼ˆé»˜è®¤éšè—ï¼‰ -->
      <div id="admin-functions" style="display: none;">
        <button class="btn secondary admin-btn" onclick="go('assign-area')">ğŸ“ åˆ†é…æ½æ”¶åŒºåŸŸ</button>
        <button class="btn secondary admin-btn" onclick="go('reset-permission')">ğŸ”‘ é‡ç½®äººå‘˜æƒé™</button>
        <button class="btn secondary admin-btn" onclick="go('view-report')">ğŸ“Š æŸ¥çœ‹å…¨é‡æ•°æ®æŠ¥è¡¨</button>
        <button class="btn secondary admin-btn" onclick="go('handle-exception')">âš ï¸ å¤„ç†æƒé™å¼‚å¸¸</button>
      </div>
    </div>

    <!-- æ‰¹é‡æ‰«ç é¡µï¼ˆæ½æ”¶å‘˜ï¼‰ -->
    <div class="page" id="scan">
      <p>è¿ç»­æ‰«æåŒ…è£¹é¢å•</p>
      <div class="card scan-area">ğŸ“· ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®æ¨¡æ‹Ÿæ‰«ç <br/>ï¼ˆå®é™…ä¸ºæ‘„åƒå¤´æ‰«ç è¯†åˆ«ï¼‰</div>
      <button class="btn primary" onclick="addItem()">+ æ¨¡æ‹Ÿæ‰«æä¸€ä¸ªåŒ…è£¹</button>
      <div class="list" id="list"></div>
      <button class="btn secondary" onclick="go('verify')">å®Œæˆæ‰«ç ï¼Œå»æ ¡éªŒ</button>
    </div>

    <!-- æ ¡éªŒé¡µï¼ˆæ½æ”¶å‘˜ï¼‰ -->
    <div class="page" id="verify">
      <p><span class="loading"></span>PC POS åç«¯æ­£åœ¨æ ¡éªŒâ€¦</p>
      <div class="card">
        <p>âœ… PC POS åç«¯æ­£åœ¨æ ¡éªŒï¼š</p>
        <ul style="margin-left: 20px; margin-top: 8px;">
          <li>è®¢å•æ˜¯å¦å­˜åœ¨ä¸”æœ‰æ•ˆ</li>
          <li>è®¢å•çŠ¶æ€æ˜¯å¦å…è®¸æ½æ”¶</li>
          <li>å½“å‰è´¦å·æ˜¯å¦æœ‰æ½æ”¶æƒé™</li>
        </ul>
      </div>
      <button class="btn primary" onclick="go('confirm')">æ ¡éªŒé€šè¿‡</button>
      <button class="btn danger" onclick="go('error')">å­˜åœ¨å¼‚å¸¸</button>
    </div>

    <!-- ç¡®è®¤é¡µï¼ˆæ½æ”¶å‘˜ï¼‰ -->
    <div class="page" id="confirm">
      <p>ç¡®è®¤æ½æ”¶ä»¥ä¸‹åŒ…è£¹ï¼ˆ<span id="count">0</span> ä»¶ï¼‰</p>
      <div class="card">
        <p>âš ï¸ æ‰¹é‡æ½æ”¶ç¡®è®¤åï¼š</p>
        <ul style="margin-left: 20px; margin-top: 8px;">
          <li>æ‰€æœ‰åŒ…è£¹å°†æ ‡è®°ä¸ºã€å·²æ½æ”¶ï¼ˆç°åœºï¼‰ã€‘</li>
          <li>çŠ¶æ€å°†åŒæ­¥è‡³ PC POS ç³»ç»Ÿ</li>
          <li>åŒ…è£¹å¯ç›´æ¥é€å¾€ä¸­è½¬åœº</li>
        </ul>
      </div>
      <button class="btn primary" onclick="submit()">âœ… ç¡®è®¤æ½æ”¶</button>
    </div>

    <!-- æˆåŠŸé¡µï¼ˆæ½æ”¶å‘˜ï¼‰ -->
    <div class="page" id="success">
      <p>ğŸ‰ æ½æ”¶æˆåŠŸ</p>
      <div class="card">
        <p>æ‰€æœ‰åŒ…è£¹å·²æ ‡è®°ä¸ºã€å·²æ½æ”¶ï¼ˆç°åœºï¼‰ã€‘</p>
        <p style="margin-top: 8px; color: #666; font-size: 14px;">æ½æ”¶æ—¶é—´ï¼š<span id="collectTime"></span></p>
        <p style="color: #666; font-size: 14px;">æ½æ”¶äººï¼šå°å“¥ï¼ˆIDï¼šKEX10086ï¼‰</p>
      </div>
      <button class="btn secondary" onclick="go('sync')">æŸ¥çœ‹ä¸ PC POS çŠ¶æ€è”åŠ¨</button>
      <button class="btn secondary" onclick="reset()">è¿”å›é¦–é¡µ</button>
    </div>

    <!-- PC POS çŠ¶æ€è”åŠ¨è¯´æ˜é¡µ -->
    <div class="page" id="sync">
      <p>ğŸ“¡ ä¸ PC POS çš„çŠ¶æ€è”åŠ¨è¯´æ˜</p>
      <div class="card">
        <p><b>1. æ½æ”¶çŠ¶æ€åŒæ­¥</b></p>
        <p>Mobile POS æäº¤æˆåŠŸåï¼ŒPOS åç«¯å·²å°†è®¢å•çŠ¶æ€æ›´æ–°ä¸º <b>å·²æ½æ”¶</b>ã€‚</p>
      </div>
      <div class="card">
        <p><b>2. PC POS å¯è§å†…å®¹</b></p>
        <ul style="margin-left: 20px; margin-top: 8px;">
          <li>è®¢å•çŠ¶æ€ï¼šå·²æ½æ”¶ï¼ˆæ¥æºï¼šMobile POSï¼‰</li>
          <li>æ½æ”¶æ—¶é—´ / æ½æ”¶äººä¿¡æ¯</li>
          <li>æ”¯æŒåç»­ç§°é‡ã€è®¡è´¹ã€å¯¹è´¦æ“ä½œ</li>
        </ul>
      </div>
      <div class="card">
        <p><b>3. åç»­å¤„ç†åŸåˆ™</b></p>
        <p>PC POS ä¸é‡å¤æ½æ”¶ï¼Œä»…å¤„ç†å¼‚å¸¸è®¢å•å’Œåé“¾è·¯ä¸šåŠ¡ã€‚</p>
      </div>
      <button class="btn primary" onclick="go('home')">æˆ‘çŸ¥é“äº†</button>
    </div>

    <!-- å¼‚å¸¸é¡µ -->
    <div class="page" id="error">
      <p>âŒ æƒé™æˆ–è®¢å•å¼‚å¸¸</p>
      <div class="card">
        <p>å¼‚å¸¸åŸå› ï¼š</p>
        <ul style="margin-left: 20px; margin-top: 8px;">
          <li>å½“å‰è§’è‰²æ— æ½æ”¶æ“ä½œæƒé™</li>
          <li>éƒ¨åˆ†è®¢å•çŠ¶æ€å¼‚å¸¸ï¼ˆå·²å–æ¶ˆ/å·²æ½æ”¶ï¼‰</li>
          <li>ç½‘ç»œå¼‚å¸¸ï¼Œæ— æ³•åŒæ­¥è®¢å•ä¿¡æ¯</li>
        </ul>
        <p style="margin-top: 12px; color: #ff4d4f;">è¯·è¿”å›é¦–é¡µé‡æ–°æ“ä½œæˆ–è”ç³»ç®¡ç†å‘˜</p>
      </div>
      <button class="btn secondary" onclick="reset()">è¿”å›é¦–é¡µ</button>
    </div>

    <!-- ç®¡ç†å‘˜é¡µé¢ï¼šåˆ†é…æ½æ”¶åŒºåŸŸ -->
    <div class="page" id="assign-area">
      <p>ğŸ“ åˆ†é…æ½æ”¶åŒºåŸŸ</p>
      <div class="card">
        <p><b>åŒºåŸŸåˆ†é…è§„åˆ™</b></p>
        <ul style="margin-left: 20px; margin-top: 8px;">
          <li>æŒ‰è¡Œæ”¿åŒºåŸŸåˆ’åˆ†ï¼šPathum Wanã€Sukhumvitã€Chatuchakã€Bang Rakã€Ratchathewiã€Lat Phrao ç­‰</li>
          <li>æ¯ä¸ªåŒºåŸŸç»‘å®š1-3åæ½æ”¶å‘˜</li>
          <li>æ”¯æŒä¸´æ—¶è°ƒæ•´ï¼ˆå¦‚å°å“¥è¯·å‡ä»£æ´¾ï¼‰</li>
        </ul>
      </div>
      <div class="card">
        <p><b>å½“å‰å¾…åˆ†é…äººå‘˜</b></p>
        <div class="item">KEX10086 - å°å“¥</div>
        <div class="item">KEX10087 - å°æ</div>
        <div class="item">KEX10088 - å°å¼ </div>
      </div>
      <button class="btn primary" onclick="showToast('åŒºåŸŸåˆ†é…æˆåŠŸï¼')">ç¡®è®¤åˆ†é…</button>
      <button class="btn secondary" onclick="go('home')">è¿”å›é¦–é¡µ</button>
    </div>

    <!-- ç®¡ç†å‘˜é¡µé¢ï¼šé‡ç½®äººå‘˜æƒé™ -->
    <div class="page" id="reset-permission">
      <p>ğŸ”‘ é‡ç½®äººå‘˜æƒé™</p>
      <div class="card">
        <p><b>æƒé™é‡ç½®è¯´æ˜</b></p>
        <ul style="margin-left: 20px; margin-top: 8px;">
          <li>å¯é‡ç½®æ½æ”¶å‘˜çš„æ½æ”¶æƒé™ã€åŒºåŸŸæƒé™</li>
          <li>é‡ç½®åå³æ—¶ç”Ÿæ•ˆï¼Œæ— éœ€é‡æ–°ç™»å½•</li>
          <li>æ“ä½œè®°å½•å°†åŒæ­¥è‡³PC POSç³»ç»Ÿæ—¥å¿—</li>
        </ul>
      </div>
      <div class="card">
        <p><b>é€‰æ‹©éœ€è¦é‡ç½®çš„äººå‘˜</b></p>
        <div class="item">KEX10086 - å°å“¥ <span style="color:#fa8c16;">ğŸ”„ é‡ç½®</span></div>
        <div class="item">KEX10087 - å°æ <span style="color:#fa8c16;">ğŸ”„ é‡ç½®</span></div>
      </div>
      <button class="btn primary" onclick="showToast('æƒé™é‡ç½®æˆåŠŸï¼')">æ‰¹é‡é‡ç½®é€‰ä¸­äººå‘˜</button>
      <button class="btn secondary" onclick="go('home')">è¿”å›é¦–é¡µ</button>
    </div>

    <!-- ç®¡ç†å‘˜é¡µé¢ï¼šæŸ¥çœ‹å…¨é‡æ•°æ®æŠ¥è¡¨ -->
    <div class="page" id="view-report">
      <p>ğŸ“Š æŸ¥çœ‹å…¨é‡æ•°æ®æŠ¥è¡¨</p>
      <div class="card">
        <p><b>æŠ¥è¡¨æ•°æ®ç»´åº¦</b></p>
        <ul style="margin-left: 20px; margin-top: 8px;">
          <li>æ—¥/å‘¨/æœˆæ½æ”¶é‡ç»Ÿè®¡</li>
          <li>å„åŒºåŸŸæ½æ”¶æ•ˆç‡å¯¹æ¯”</li>
          <li>å¼‚å¸¸è®¢å•å æ¯”åˆ†æ</li>
          <li>æ½æ”¶å‘˜ä¸šç»©æ’è¡Œ</li>
        </ul>
      </div>
      <div class="card">
        <p><b>ä»Šæ—¥æ ¸å¿ƒæ•°æ®</b></p>
        <div class="item">æ€»æ½æ”¶é‡ï¼š1286 ä»¶</div>
        <div class="item">å¼‚å¸¸è®¢å•ï¼š23 ä»¶</div>
        <div class="item">å¹³å‡æ½æ”¶æ—¶æ•ˆï¼š12åˆ†é’Ÿ/å•</div>
      </div>
      <button class="btn primary" onclick="showToast('æŠ¥è¡¨å·²å¯¼å‡ºè‡³PC POSç³»ç»Ÿï¼')">å¯¼å‡ºæŠ¥è¡¨</button>
      <button class="btn secondary" onclick="go('home')">è¿”å›é¦–é¡µ</button>
    </div>

    <!-- ç®¡ç†å‘˜é¡µé¢ï¼šå¤„ç†æƒé™å¼‚å¸¸ -->
    <div class="page" id="handle-exception">
      <p>âš ï¸ å¤„ç†æƒé™å¼‚å¸¸</p>
      <div class="card">
        <p><b>å½“å‰å¾…å¤„ç†å¼‚å¸¸</b></p>
        <div class="item">KEX10086 - å°å“¥ <br/><small style="color:#ff4d4f;">æ— Pathum WanåŒºåŸŸæ½æ”¶æƒé™ä½†å¤šæ¬¡æ“ä½œ</small></div>
        <div class="item">KEX10087 - å°æ <br/><small style="color:#ff4d4f;">è´¦å·å¼‚åœ°ç™»å½•ï¼Œæƒé™ä¸´æ—¶å†»ç»“</small></div>
      </div>
      <div class="card">
        <p><b>å¼‚å¸¸å¤„ç†æ“ä½œ</b></p>
        <ul style="margin-left: 20px; margin-top: 8px;">
          <li>ä¸´æ—¶æˆæƒï¼šå¼€é€šæƒé™24å°æ—¶</li>
          <li>æ°¸ä¹…æˆæƒï¼šæ›´æ–°è§’è‰²æƒé™é…ç½®</li>
          <li>è”ç³»ç”¨æˆ·ï¼šå‘é€æƒé™å¼‚å¸¸æé†’</li>
        </ul>
      </div>
      <button class="btn primary" onclick="showToast('å¼‚å¸¸å¤„ç†å®Œæˆï¼')">å¤„ç†é€‰ä¸­å¼‚å¸¸</button>
      <button class="btn secondary" onclick="go('home')">è¿”å›é¦–é¡µ</button>
    </div>
  </div>

  <div class="toast" id="toast">æç¤º</div>

  <script>
    let items = [];
    let role = 'collector'; // collector: æ½æ”¶å‘˜, admin: ç®¡ç†å‘˜

    // é¡µé¢è·³è½¬å‡½æ•°ä¼˜åŒ–
    function go(id) {
      // ç®¡ç†å‘˜è§’è‰²ç¦æ­¢è¿›å…¥æ½æ”¶ç›¸å…³é¡µé¢
      if (role === 'admin' && ['scan', 'verify', 'confirm', 'success'].includes(id)) {
        showToast('ç®¡ç†å‘˜æ— æ½æ”¶æ“ä½œæƒé™ï¼');
        return;
      }
      
      // éšè—æ‰€æœ‰é¡µé¢
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      // æ˜¾ç¤ºç›®æ ‡é¡µé¢
      const targetPage = document.getElementById(id);
      targetPage.classList.add('active');
      
      // æ›´æ–°åŒ…è£¹æ•°é‡æ˜¾ç¤º
      if (document.getElementById('count')) {
        document.getElementById('count').innerText = items.length;
      }
      
      // ä¸ºæˆåŠŸé¡µè®¾ç½®æ½æ”¶æ—¶é—´
      if (id === 'success') {
        const now = new Date();
        const timeStr = now.getFullYear() + '-' + 
                        String(now.getMonth() + 1).padStart(2, '0') + '-' + 
                        String(now.getDate()).padStart(2, '0') + ' ' + 
                        String(now.getHours()).padStart(2, '0') + ':' + 
                        String(now.getMinutes()).padStart(2, '0') + ':' + 
                        String(now.getSeconds()).padStart(2, '0');
        document.getElementById('collectTime').innerText = timeStr;
      }
      
      // æ»šåŠ¨åˆ°é¡µé¢é¡¶éƒ¨
      targetPage.scrollTop = 0;
    }

    // æ·»åŠ åŒ…è£¹é¡¹å‡½æ•°ä¼˜åŒ–ï¼ˆKEXå¼€å¤´å•å·ï¼‰
    function addItem() {
      const id = 'KEX' + Math.floor(Math.random() * 1000000).toString().padStart(6, '0');
      items.push(id);
      
      const div = document.createElement('div');
      div.className = 'item';
      div.innerHTML = `
        <span>${id}</span>
        <span style="color: #fa8c16;">âœ… å·²æ‰«æ</span>
      `;
      
      document.getElementById('list').appendChild(div);
      showToast('å·²æ‰«æè¿å•å·ï¼š' + id);
      
      // è‡ªåŠ¨æ»šåŠ¨åˆ°æœ€æ–°é¡¹
      const list = document.getElementById('list');
      list.scrollTop = list.scrollHeight;
    }

    // æäº¤æ½æ”¶å‡½æ•°
    function submit() {
      if (items.length === 0) {
        showToast('è¯·å…ˆæ‰«æåŒ…è£¹ï¼');
        return;
      }
      
      if (role !== 'collector') {
        showToast('å½“å‰è§’è‰²æ— æ½æ”¶æƒé™ï¼');
        go('error');
        return;
      }
      
      // æ¨¡æ‹Ÿæäº¤å»¶è¿Ÿ
      showToast('æ­£åœ¨æäº¤æ½æ”¶ä¿¡æ¯...');
      setTimeout(() => {
        go('success');
      }, 800);
    }

    // é‡ç½®å‡½æ•°
    function reset() {
      items = [];
      document.getElementById('list').innerHTML = '';
      go('home');
      showToast('å·²é‡ç½®ï¼Œè¿”å›é¦–é¡µ');
    }

    // åˆ‡æ¢è§’è‰²å‡½æ•°
    function switchRole() {
      // åˆ‡æ¢è§’è‰²
      role = role === 'collector' ? 'admin' : 'collector';
      const roleText = role === 'collector' ? 'æ½æ”¶å‘˜' : 'ç®¡ç†å‘˜';
      
      // æ›´æ–°è§’è‰²æƒé™å±•ç¤ºåŒºåŸŸ
      const permissionCard = document.getElementById('role-permission');
      const collectBtn = document.getElementById('collect-btn');
      const adminFunctions = document.getElementById('admin-functions');
      
      if (role === 'collector') {
        // æ½æ”¶å‘˜è§’è‰²
        permissionCard.innerHTML = `
          <p><b>å½“å‰è§’è‰²ï¼šæ½æ”¶å‘˜</b></p>
          <p>æƒé™ï¼š</p>
          <ul style="margin-left: 20px; margin-top: 8px;">
            <li>æ‰«ç ã€æ ¡éªŒã€ç¡®è®¤æ½æ”¶</li>
            <li>æŸ¥çœ‹æ½æ”¶è®°å½•</li>
          </ul>
        `;
        collectBtn.style.display = 'block'; // æ˜¾ç¤ºæ½æ”¶æŒ‰é’®
        adminFunctions.style.display = 'none'; // éšè—ç®¡ç†å‘˜åŠŸèƒ½
      } else {
        // ç®¡ç†å‘˜è§’è‰²
        permissionCard.innerHTML = `
          <p><b>å½“å‰è§’è‰²ï¼šç®¡ç†å‘˜</b></p>
          <p>æƒé™ï¼š</p>
          <ul style="margin-left: 20px; margin-top: 8px;">
            <li>åˆ†é…æ½æ”¶åŒºåŸŸ</li>
            <li>é‡ç½®äººå‘˜æƒé™</li>
            <li>æŸ¥çœ‹å…¨é‡æ•°æ®æŠ¥è¡¨</li>
            <li>å¤„ç†æƒé™å¼‚å¸¸</li>
          </ul>
        `;
        collectBtn.style.display = 'none'; // éšè—æ½æ”¶æŒ‰é’®
        adminFunctions.style.display = 'block'; // æ˜¾ç¤ºç®¡ç†å‘˜åŠŸèƒ½
      }
      
      showToast('è§’è‰²å·²åˆ‡æ¢ä¸ºï¼š' + roleText);
    }

    // æç¤ºæ¡†å‡½æ•°ä¼˜åŒ–
    function showToast(msg) {
      const toast = document.getElementById('toast');
      toast.innerText = msg;
      toast.style.display = 'block';
      
      // æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨
      if (window.toastTimer) {
        clearTimeout(window.toastTimer);
      }
      
      // è®¾ç½®æ–°çš„å®šæ—¶å™¨
      window.toastTimer = setTimeout(() => {
        toast.style.display = 'none';
      }, 2000);
    }

    // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', function() {
      // ç¦æ­¢é¡µé¢ç¼©æ”¾
      document.addEventListener('touchmove', function(e) {
        if (e.scale !== 1) {
          e.preventDefault();
        }
      }, { passive: false });
    });
  </script>
</body>
</html>
